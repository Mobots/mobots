   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"main.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.comm	mouse_data,14,4
  19              		.comm	spi1_datastat,1,1
  20              		.comm	spi2_datastat,1,1
  21              		.global	time_in_ms
  22              		.bss
  23              		.align	2
  26              	time_in_ms:
  27 0000 00000000 		.space	4
  28              		.section	.rodata
  29              		.align	2
  30              	.LC0:
  31 0000 44656C74 		.ascii	"DeltaX: %hi\012 DeltaY: %hi\000"
  31      61583A20 
  31      2568690A 
  31      2044656C 
  31      7461593A 
  32 0019 000000   		.text
  33              		.align	2
  34              		.global	main
  35              		.thumb
  36              		.thumb_func
  38              	main:
  39              	.LFB29:
  40              		.file 1 "../main.c"
   1:../main.c     **** /**
   2:../main.c     ****   ******************************************************************************
   3:../main.c     ****   * @file    Demo/src/main.c 
   4:../main.c     ****   * @author  MCD Application Team
   5:../main.c     ****   * @version V1.0.0
   6:../main.c     ****   * @date    09/13/2010
   7:../main.c     ****   * @brief   Main program body
   8:../main.c     ****   ******************************************************************************
   9:../main.c     ****   * @copy
  10:../main.c     ****   *
  11:../main.c     ****   * THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS
  12:../main.c     ****   * WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE
  13:../main.c     ****   * TIME. AS A RESULT, STMICROELECTRONICS SHALL NOT BE HELD LIABLE FOR ANY
  14:../main.c     ****   * DIRECT, INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING
  15:../main.c     ****   * FROM THE CONTENT OF SUCH FIRMWARE AND/OR THE USE MADE BY CUSTOMERS OF THE
  16:../main.c     ****   * CODING INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.
  17:../main.c     ****   *
  18:../main.c     ****   * <h2><center>&copy; COPYRIGHT 2010 STMicroelectronics</center></h2>
  19:../main.c     ****   */ 
  20:../main.c     **** 
  21:../main.c     **** /* Includes ------------------------------------------------------------------*/
  22:../main.c     **** #include "stm32f10x.h"
  23:../main.c     **** #include "system_stm32f10x.h"
  24:../main.c     **** #include "stm32f10x_gpio.h"
  25:../main.c     **** #include "stm32f10x_rcc.h"
  26:../main.c     **** #include "usart.h"
  27:../main.c     **** #include "printf.h"
  28:../main.c     **** #include "servo.h"
  29:../main.c     **** #include "mousesensor.h"
  30:../main.c     **** #include "spi_1.h"
  31:../main.c     **** #include "misc.h"
  32:../main.c     **** #include "led.h"
  33:../main.c     **** 
  34:../main.c     **** /* Private typedef -----------------------------------------------------------*/
  35:../main.c     **** /* Private define ------------------------------------------------------------*/
  36:../main.c     **** #define  LSE_FAIL_FLAG  0x80
  37:../main.c     **** #define  LSE_PASS_FLAG  0x100
  38:../main.c     **** /* Private macro -------------------------------------------------------------*/
  39:../main.c     **** /* Private consts ------------------------------------------------------------*/
  40:../main.c     **** void Delay(uint32_t nTime);
  41:../main.c     **** 
  42:../main.c     **** 
  43:../main.c     **** /* Private variables ---------------------------------------------------------*/
  44:../main.c     **** unsigned int time_in_ms = 0;
  45:../main.c     **** /* Private function prototypes -----------------------------------------------*/
  46:../main.c     **** 
  47:../main.c     **** /* Private functions ---------------------------------------------------------*/
  48:../main.c     **** 
  49:../main.c     **** /**
  50:../main.c     ****   * @brief  Main program.
  51:../main.c     ****   * @param  None
  52:../main.c     ****   * @retval None
  53:../main.c     ****   */
  54:../main.c     **** 
  55:../main.c     **** int main(void)
  56:../main.c     **** {
  41              		.loc 1 56 0
  42              		.cfi_startproc
  43              		@ args = 0, pretend = 0, frame = 8
  44              		@ frame_needed = 1, uses_anonymous_args = 0
  45 0000 80B5     		push	{r7, lr}
  46              	.LCFI0:
  47              		.cfi_def_cfa_offset 8
  48              		.cfi_offset 14, -4
  49              		.cfi_offset 7, -8
  50 0002 82B0     		sub	sp, sp, #8
  51              	.LCFI1:
  52              		.cfi_def_cfa_offset 16
  53 0004 00AF     		add	r7, sp, #0
  54              	.LCFI2:
  55              		.cfi_def_cfa_register 7
  57:../main.c     **** //SysTick_CLKSourceConfig(SysTick_CLKSource_HCLK_Div8);
  58:../main.c     **** 	led_init();
  56              		.loc 1 58 0
  57 0006 FFF7FEFF 		bl	led_init
  59:../main.c     **** 	GPIO_ResetBits(GPIOC, GPIO_Pin_9);
  58              		.loc 1 59 0
  59 000a 4FF48050 		mov	r0, #4096
  60 000e C4F20100 		movt	r0, 16385
  61 0012 4FF40071 		mov	r1, #512
  62 0016 FFF7FEFF 		bl	GPIO_ResetBits
  60:../main.c     **** 	GPIO_ResetBits(GPIOC, GPIO_Pin_8);
  63              		.loc 1 60 0
  64 001a 4FF48050 		mov	r0, #4096
  65 001e C4F20100 		movt	r0, 16385
  66 0022 4FF48071 		mov	r1, #256
  67 0026 FFF7FEFF 		bl	GPIO_ResetBits
  61:../main.c     **** //	SysTick_Config(SystemCoreClock / 1000);
  62:../main.c     **** 	USART1_Init(USART_USE_INTERRUPTS);
  68              		.loc 1 62 0
  69 002a 4FF00100 		mov	r0, #1
  70 002e FFF7FEFF 		bl	USART1_Init
  63:../main.c     **** //	servo_init();
  64:../main.c     **** 	Sensor_init();
  71              		.loc 1 64 0
  72 0032 FFF7FEFF 		bl	Sensor_init
  65:../main.c     **** 
  66:../main.c     **** 	GPIO_SetBits(GPIOC, GPIO_Pin_9);
  73              		.loc 1 66 0
  74 0036 4FF48050 		mov	r0, #4096
  75 003a C4F20100 		movt	r0, 16385
  76 003e 4FF40071 		mov	r1, #512
  77 0042 FFF7FEFF 		bl	GPIO_SetBits
  78 0046 00E0     		b	.L3
  79              	.L4:
  67:../main.c     **** 	while(1)
  68:../main.c     **** 	{
  69:../main.c     **** 		if(spi1_datastat == UPDATED){
  70:../main.c     **** 			s16 delta_x, delta_y;
  71:../main.c     **** 
  72:../main.c     **** 			delta_x = (s16)mouse_data.d_xl | ((s16)mouse_data.d_xl<<8);
  73:../main.c     **** 			delta_y = (s16)mouse_data.d_yl | ((s16)mouse_data.d_yl<<8);
  74:../main.c     **** 
  75:../main.c     **** 			printf("DeltaX: %hi\n DeltaY: %hi", delta_x, delta_y);
  76:../main.c     **** 		}
  77:../main.c     **** 
  78:../main.c     **** 	}
  80              		.loc 1 78 0
  81 0048 00BF     		nop
  82              	.L3:
  69:../main.c     **** 		if(spi1_datastat == UPDATED){
  83              		.loc 1 69 0
  84 004a 40F20003 		movw	r3, #:lower16:spi1_datastat
  85 004e C0F20003 		movt	r3, #:upper16:spi1_datastat
  86 0052 1B78     		ldrb	r3, [r3, #0]	@ zero_extendqisi2
  87 0054 012B     		cmp	r3, #1
  88 0056 F7D1     		bne	.L4
  89              	.LBB2:
  72:../main.c     **** 			delta_x = (s16)mouse_data.d_xl | ((s16)mouse_data.d_xl<<8);
  90              		.loc 1 72 0
  91 0058 40F20003 		movw	r3, #:lower16:mouse_data
  92 005c C0F20003 		movt	r3, #:upper16:mouse_data
  93 0060 9B78     		ldrb	r3, [r3, #2]
  94 0062 DBB2     		uxtb	r3, r3
  95 0064 1A46     		mov	r2, r3
  96 0066 40F20003 		movw	r3, #:lower16:mouse_data
  97 006a C0F20003 		movt	r3, #:upper16:mouse_data
  98 006e 9B78     		ldrb	r3, [r3, #2]
  99 0070 DBB2     		uxtb	r3, r3
 100 0072 4FEA0323 		lsl	r3, r3, #8
 101 0076 9BB2     		uxth	r3, r3
 102 0078 1343     		orrs	r3, r3, r2
 103 007a FB80     		strh	r3, [r7, #6]	@ movhi
  73:../main.c     **** 			delta_y = (s16)mouse_data.d_yl | ((s16)mouse_data.d_yl<<8);
 104              		.loc 1 73 0
 105 007c 40F20003 		movw	r3, #:lower16:mouse_data
 106 0080 C0F20003 		movt	r3, #:upper16:mouse_data
 107 0084 1B79     		ldrb	r3, [r3, #4]
 108 0086 DBB2     		uxtb	r3, r3
 109 0088 1A46     		mov	r2, r3
 110 008a 40F20003 		movw	r3, #:lower16:mouse_data
 111 008e C0F20003 		movt	r3, #:upper16:mouse_data
 112 0092 1B79     		ldrb	r3, [r3, #4]
 113 0094 DBB2     		uxtb	r3, r3
 114 0096 4FEA0323 		lsl	r3, r3, #8
 115 009a 9BB2     		uxth	r3, r3
 116 009c 1343     		orrs	r3, r3, r2
 117 009e BB80     		strh	r3, [r7, #4]	@ movhi
  75:../main.c     **** 			printf("DeltaX: %hi\n DeltaY: %hi", delta_x, delta_y);
 118              		.loc 1 75 0
 119 00a0 B7F90620 		ldrsh	r2, [r7, #6]
 120 00a4 B7F90430 		ldrsh	r3, [r7, #4]
 121 00a8 40F20000 		movw	r0, #:lower16:.LC0
 122 00ac C0F20000 		movt	r0, #:upper16:.LC0
 123 00b0 1146     		mov	r1, r2
 124 00b2 1A46     		mov	r2, r3
 125 00b4 FFF7FEFF 		bl	printf
 126              	.LBE2:
 127              		.loc 1 78 0
 128 00b8 C6E7     		b	.L4
 129              		.cfi_endproc
 130              	.LFE29:
 132 00ba 00BF     		.align	2
 133              		.global	SysTick_Handler
 134              		.thumb
 135              		.thumb_func
 137              	SysTick_Handler:
 138              	.LFB30:
  79:../main.c     **** 
  80:../main.c     **** }
  81:../main.c     **** 
  82:../main.c     **** 
  83:../main.c     **** void SysTick_Handler(void)
  84:../main.c     **** {
 139              		.loc 1 84 0
 140              		.cfi_startproc
 141              		@ args = 0, pretend = 0, frame = 0
 142              		@ frame_needed = 1, uses_anonymous_args = 0
 143              		@ link register save eliminated.
 144 00bc 80B4     		push	{r7}
 145              	.LCFI3:
 146              		.cfi_def_cfa_offset 4
 147              		.cfi_offset 7, -4
 148 00be 00AF     		add	r7, sp, #0
 149              	.LCFI4:
 150              		.cfi_def_cfa_register 7
  85:../main.c     **** 	time_in_ms++;
 151              		.loc 1 85 0
 152 00c0 40F20003 		movw	r3, #:lower16:time_in_ms
 153 00c4 C0F20003 		movt	r3, #:upper16:time_in_ms
 154 00c8 1B68     		ldr	r3, [r3, #0]
 155 00ca 03F10102 		add	r2, r3, #1
 156 00ce 40F20003 		movw	r3, #:lower16:time_in_ms
 157 00d2 C0F20003 		movt	r3, #:upper16:time_in_ms
 158 00d6 1A60     		str	r2, [r3, #0]
  86:../main.c     **** }
 159              		.loc 1 86 0
 160 00d8 BD46     		mov	sp, r7
 161 00da 80BC     		pop	{r7}
 162 00dc 7047     		bx	lr
 163              		.cfi_endproc
 164              	.LFE30:
 166 00de 00BF     		.align	2
 167              		.global	getTime
 168              		.thumb
 169              		.thumb_func
 171              	getTime:
 172              	.LFB31:
  87:../main.c     **** 
  88:../main.c     **** unsigned int getTime(){
 173              		.loc 1 88 0
 174              		.cfi_startproc
 175              		@ args = 0, pretend = 0, frame = 0
 176              		@ frame_needed = 1, uses_anonymous_args = 0
 177              		@ link register save eliminated.
 178 00e0 80B4     		push	{r7}
 179              	.LCFI5:
 180              		.cfi_def_cfa_offset 4
 181              		.cfi_offset 7, -4
 182 00e2 00AF     		add	r7, sp, #0
 183              	.LCFI6:
 184              		.cfi_def_cfa_register 7
  89:../main.c     **** 	return time_in_ms;
 185              		.loc 1 89 0
 186 00e4 40F20003 		movw	r3, #:lower16:time_in_ms
 187 00e8 C0F20003 		movt	r3, #:upper16:time_in_ms
 188 00ec 1B68     		ldr	r3, [r3, #0]
  90:../main.c     **** }
 189              		.loc 1 90 0
 190 00ee 1846     		mov	r0, r3
 191 00f0 BD46     		mov	sp, r7
 192 00f2 80BC     		pop	{r7}
 193 00f4 7047     		bx	lr
 194              		.cfi_endproc
 195              	.LFE31:
 197              	.Letext0:
 198              		.file 2 "/opt/CodeSourcery/arm-2011.09/bin/../lib/gcc/arm-none-eabi/4.6.1/../../../../arm-none-eab
 199              		.file 3 "/home/simon/Workspace/stm32vl/stm32_lib/inc/stm32f10x.h"
 200              		.file 4 "../mousesensor.h"
 201              		.file 5 "/home/simon/Workspace/stm32vl/stm32_lib/inc/core_cm3.h"
 202              		.file 6 "../usart.h"
DEFINED SYMBOLS
                            *ABS*:00000000 main.c
                            *COM*:0000000e mouse_data
                            *COM*:00000001 spi1_datastat
                            *COM*:00000001 spi2_datastat
     /tmp/ccfuUA8T.s:26     .bss:00000000 time_in_ms
     /tmp/ccfuUA8T.s:23     .bss:00000000 $d
     /tmp/ccfuUA8T.s:29     .rodata:00000000 $d
     /tmp/ccfuUA8T.s:30     .rodata:00000000 .LC0
     /tmp/ccfuUA8T.s:33     .text:00000000 $t
     /tmp/ccfuUA8T.s:38     .text:00000000 main
     /tmp/ccfuUA8T.s:137    .text:000000bc SysTick_Handler
     /tmp/ccfuUA8T.s:171    .text:000000e0 getTime
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
led_init
GPIO_ResetBits
USART1_Init
Sensor_init
GPIO_SetBits
printf
